<!DOCTYPE html>
<html lang="en">
<head>
		<meta charset="UTF-8">
		<script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=12YKVkPOgAYxipWyUpuQYIeNZcughmdW"></script>
		<title></title>
		<style type="text/css">
			body,
			html,
			#allmap {
				height: 300px;
				width: 100%;
				overflow: hidden;
				margin: 0;
				font-family: "微软雅黑";
			}

			#r-result {
				width: 100%;
				height: 100%;
			}
		</style>
</head>
<body>
<div id="allmap">
		</div>
		<div id="r-result"></div>
		<script>
			var map = new BMap.Map("l-map");            // 创建Map实例
			map.centerAndZoom(new BMap.Point(116.404, 39.915), 12);

			var busline = new BMap.BusLineSearch(map,{
			renderOptions:{map:map,panel:"r-result"},
				onGetBusListComplete: function(result){
			   		if(result) {
				 		var fstLine = result.getBusListItem(0);//获取第一个公交列表显示到map上
				 		busline.getBusLine(fstLine);
			   		}
				}
			});
			function busSearch(){
				var busName = 331;
				busline.getBusList(busName);
			}
			setTimeout(function(){
				busSearch();
			},1500);
		</script>
</body>
</html>