import socket
import os
def geBanner(dst):
    socket.setdefaulttimeout(5)
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    #sock.setsockopt(socket.SOL_SOCKET, socket.SO_RCVTIMEO, struct.pack('ii', int(2), 0))  # 2 sec timeout
    try:
        sock.connect(dst)
    except:
        return '', -1
    Testfr=[
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    ]
    temp = ''.join(map(chr, Testfr))
    # with open("/home/iot/IdeaProjects/IPScaner/src/main/java/io/ludam/SendDatas/GePlc.txt", 'w') as f:
    #     f.writelines(temp)
    #     f.close
    print(temp)
    sock.send(bytes(Testfr))
    recv = sock.recv(8192)
    print(recv)
if __name__=='__main__':
    geBanner(('166.169.224.158',18245))