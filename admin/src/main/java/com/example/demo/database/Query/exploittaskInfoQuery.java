package com.example.demo.database.Query;

import com.example.demo.entity.deviceInfo;
import com.example.demo.entity.exploittaskInfo;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

public class exploittaskInfoQuery extends AbstractQuery{
    public exploittaskInfoQuery(Connection connection) throws SQLException {
        super(connection);
    }
    public List<exploittaskInfo> queryRecord(String sql){
        List<exploittaskInfo> list=new ArrayList<>();
        synchronized (this.connection){
            try{
                ResultSet resultSet = connection.createStatement().executeQuery(sql);
                while(resultSet.next()){
                    exploittaskInfo exploittaskInfo=new exploittaskInfo();
                    exploittaskInfo.setDes(resultSet.getString("taskdesc"));
                    exploittaskInfo.setPostdate(resultSet.getString("taskdate"));
                    exploittaskInfo.setTarget(resultSet.getString("IP"));
                    exploittaskInfo.setModel(resultSet.getString("exploitmodule"));
                    exploittaskInfo.setTaskname(resultSet.getString("taskname"));
                    exploittaskInfo.setRaw(resultSet.getString("exploitresult"));
                    exploittaskInfo.setObject(resultSet.getString("exploitobject"));
                    list.add(exploittaskInfo);
                }
            }catch (SQLException e){
                e.printStackTrace();
            }
        }
        return list;
    }
}
